/**
This notice must be untouched at all times.
This is the COMPRESSED version of Draw2D
WebSite: http://www.draw2d.org
Copyright: 2006 Andreas Herz. All rights reserved.
Created: 5.11.2006 by Andreas Herz (Web: http://www.freegroup.de )
LICENSE: LGPL
**/

draw2d.ServerPropertyPage=function(){draw2d.PropertyPage.call(this);this.html=document.createElement("div");this.html.style.width="100%";this.html.style.height="100%";this.header=this.createLabelElement(draw2d.I18N.PROPERTYPANEL_HEADER_SERVER,0,0);this.header.className="panel_header";this.html.appendChild(this.header);this.datarowLabel=this.createLabelElement(draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_NAME,10,45);this.html.appendChild(this.datarowLabel);this.nameText=document.createElement("input");this.nameText.type="text";var _775=this;if(editor.isReadonly()){this.nameText.disabled="true";}else{Event.observe(this.nameText,"keyup",function(e){var func=_775.currentModel.setName.bind(_775.currentModel);var _778=new draw2d.CommandChangeProperty(editor.getGraphicalViewer(),func,_775.currentModel.getName(),_775.nameText.value);editor.executeCommand(_778);});}this.nameText.style.position="absolute";this.nameText.style.width="210px";this.nameText.style.top="65px";this.nameText.style.left="10px";this.html.appendChild(this.nameText);this.cpuLabel=this.createLabelElement(draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_CPUUNITS,10,95);this.html.appendChild(this.cpuLabel);this.listboxCPU=document.createElement("select");this.listboxCPU.style.position="absolute";this.listboxCPU.style.overflow="auto";this.listboxCPU.style.width="60px";this.listboxCPU.style.top="115px";this.listboxCPU.style.left="10px";this.listboxCPU.size=1;this.listboxCPU["onchange"]=function(){var func=_775.currentModel.setCpuUnits.bind(_775.currentModel);var _77a=new draw2d.CommandChangeProperty(editor.getGraphicalViewer(),func,_775.currentModel.getCpuUnits(),_775.listboxCPU.selectedIndex+1);editor.executeCommand(_77a);};for(var i=1;i<8;i++){var node=document.createElement("option");node.value=""+i;node.appendChild(document.createTextNode(""+i));this.listboxCPU.appendChild(node);}this.html.appendChild(this.listboxCPU);this.ramLabel=this.createLabelElement(draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_RAM_MB,100,95);this.html.appendChild(this.ramLabel);this.ramText=document.createElement("input");this.ramText.type="text";var _77d=function(_77e){var ram=parseInt(_77e.value,10);if(isNaN(ram)){ram=1024;}_77e.value=""+ram;var func=this.currentModel.setRAM.bind(this.currentModel);var _781=new draw2d.CommandChangeProperty(editor.getGraphicalViewer(),func,this.currentModel.getRAM(),_77e.value);editor.executeCommand(_781);};_77d=_77d.bind(this,this.ramText);Event.observe(this.ramText,"keyup",_77d);this.ramText.style.position="absolute";this.ramText.style.width="110px";this.ramText.style.top="115px";this.ramText.style.left="100px";this.html.appendChild(this.ramText);this.imagesLabel=this.createLabelElement(draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_IMAGES,10,155);this.imagesLabel.className="property_panel_image_header";this.html.appendChild(this.imagesLabel);this.imagesAddLabel=this.createLabelElement(" ",120,155);this.imagesAddLabel.className="property_panel_image_add";this.imagesAddLabel.title=draw2d.I18N.TOOLTIP_BUTTON_ADD_IMAGE;this.html.appendChild(this.imagesAddLabel);Event.observe(this.imagesAddLabel,"click",function(){var _782=new draw2d.AddImageDialog("dialog_add_image",this.currentModel);_782.show();}.bind(this));this.imageContainer=document.createElement("div");this.imageContainer.style.position="absolute";this.imageContainer.style.top="175px";this.imageContainer.style.left="10px";this.imageContainer.style.width="240px";this.imageContainer.style.overflowX="hidden";this.imageContainer.style.overflowY="auto";this.imageContainer.className="property_panel_image_container";this.html.appendChild(this.imageContainer);};draw2d.ServerPropertyPage.prototype=new draw2d.PropertyPage();draw2d.ServerPropertyPage.prototype.type="draw2d.ServerPropertyPage";draw2d.ServerPropertyPage.prototype.init=function(_783){this.currentModel=_783;this.nameText.value=_783.getName();this.ramText.value=_783.getRAM();this.listboxCPU.selectedIndex=parseInt(_783.getCpuUnits(),10)-1;this.imageContainer.innerHTML="";var _784=new Element("table");_784.style.position="absolute";_784.style.top="0px";_784.style.left="0px";_784.style.width="220px";_784.style.tableLayout="fixed";_784.cellspacing="0";_784.cellpadding="0";var _785=_783.getImagesModel().getImageModels();this.imageContainer.appendChild(_784);for(var i=0;i<_785.getSize();i++){var img=_785.get(i);this.createNewImageHeader(_784,img);cell=this.createNewImageCell(_784,draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_IMAGE_BOOTORDER);var _788=document.createElement("select");_788.style.overflow="auto";_788.style.width="60px";_788.size=1;var _789=function(_78a){var func=this.setBootOrder.bind(this);var _78c=new draw2d.CommandChangeProperty(editor.getGraphicalViewer(),func,this.getBootOrder(),_78a.selectedIndex+1);editor.executeCommand(_78c);};for(var ii=1;ii<10;ii++){var node=document.createElement("option");node.value=""+ii;node.appendChild(document.createTextNode(""+ii));_788.appendChild(node);}_788.selectedIndex=img.getBootOrder()-1;cell.appendChild(_788);_789=_789.bind(img,_788);Event.observe(_788,"change",_789);cell=this.createNewImageCell(_784,draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_IMAGE_FILENAME);cell.innerHTML=img.getFileName();ellipsis(cell);cell=this.createNewImageCell(_784,draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_IMAGE_TYPE);cell.innerHTML=img.getImageType();cell=this.createNewImageCell(_784,draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_IMAGE_WRITEBACK);cell.innerHTML=img.getWriteback();cell=this.createNewImageCell(_784,draw2d.I18N.PROPERTYPANEL_PROPERTYLABEL_IMAGE_READONLY);cell.innerHTML=img.getReadonly();cell=this.createSeparator(_784);}};draw2d.ServerPropertyPage.prototype.onResize=function(w,h){this.imageContainer.style.height=Math.max(10,h-parseInt(this.imageContainer.style.top,10))+"px";};draw2d.ServerPropertyPage.prototype.createNewImageHeader=function(_791,_792){var row=_791.insertRow(_791.rows.length);var cell=row.insertCell(0);cell.style.width="70px";cell.innerHTML=_792.getName()+"   ";cell.className="property_panel_image_name";cell.setAttribute("colspan","2");var _795=document.createElement("span");_795.style.whiteSpace="nowrap";_795.className="property_panel_image_remove";_795.title=draw2d.I18N.TOOLTIP_BUTTON_REMOVE_IMAGE;_795.innerHTML=" ";cell.appendChild(_795);Event.observe(_795,"click",function(_796,_797){var _798=new draw2d.CommandRemoveImage(editor.getGraphicalViewer(),_796,_797);editor.getCommandStack().execute(_798);}.bind(this,this.currentModel,_792));};draw2d.ServerPropertyPage.prototype.createNewImageCell=function(_799,_79a){var row=_799.insertRow(_799.rows.length);var cell=row.insertCell(0);cell.innerHTML=_79a;cell.className="property_panel_label";cell.style.width="70px";var cell=row.insertCell(1);cell.style.overflow="hidden";cell.style.width="130px";cell.className="property_panel_data";var _79d=document.createElement("div");_79d.style.whiteSpace="nowrap";_79d.style.overflow="hidden";cell.appendChild(_79d);return _79d;};draw2d.ServerPropertyPage.prototype.createSeparator=function(_79e){var row=_79e.insertRow(_79e.rows.length);var cell=row.insertCell(0);cell.innerHTML=" ";cell.className="property_panel_image_separator";cell.setAttribute("colspan","2");};draw2d.ServerPropertyPage.prototype.deinit=function(){};draw2d.ServerPropertyPage.prototype.getHTMLElement=function(){return this.html;};